{
  "key": "infiniteoptions/order/track_klaviyo_event",
  "name": "Add Klaviyo event when customer place an Infinite Options order",
  "version": "1.0.0",
  "description": "We are firing a Klaviyo event called \"Infinite Options Order\" whenever an Infinite Option order has been placed. This would allow customers to use this event as a trigger in their Klaviyo flows. As part of this event, we send the following order data:\n- Customer First Name\n- Customer Last Name\n- Email\n- Customer ID\n- Shipping Address\n- Organization (company)\n- Source (shopify)",
  "video": "",
  "readme": "",
  "tags": [],
  "source": "",
  "destination": "",
  "seconds": 0,
  "enabled": false,
  "logging": false,
  "debug": false,
  "config": {
    "inputs": [
      {
        "schema": 4.1,
        "trigger_type": "input",
        "type": "infiniteoptions",
        "entity": "order",
        "action": "created",
        "name": "Infinite Options Order Created",
        "key": "infiniteoptions_order",
        "metadata": [],
        "local_fields": [],
        "weight": 0
      }
    ],
    "outputs": [
      {
        "schema": 2,
        "trigger_type": "output",
        "type": "klaviyo",
        "entity": "track",
        "action": "create",
        "name": "Klaviyo Track event Create",
        "key": "klaviyo_track",
        "metadata": {
          "event": "Infinite Options Order",
          "email": "{{shopify_order.email}}",
          "mapping": [
            {
              "destination": "$id",
              "source": "{{infiniteoptions_order.order.customer.id}}"
            },
            {
              "destination": "$first_name",
              "source": "{{infiniteoptions_order.order.customer.first_name}}"
            },
            {
              "destination": "$last_name",
              "source": "{{infiniteoptions_order.order.customer.last_name}}"
            },
            {
              "destination": "$phone_number",
              "source": "{{infiniteoptions_order.order.customer.phone}}"
            },
            {
              "destination": "$organization",
              "source": "{{infiniteoptions_order.order.customer.default_address.company}}"
            },
            {
              "destination": "$address1",
              "source": "{{infiniteoptions_order.order.shipping_address.address1}}"
            },
            {
              "destination": "$address2",
              "source": "{{infiniteoptions_order.order.shipping_address.address2}}"
            },
            {
              "destination": "$city",
              "source": "{{infiniteoptions_order.order.shipping_address.city}}"
            },
            {
              "destination": "$region",
              "source": "{{infiniteoptions_order.order.customer.state}}"
            },
            {
              "destination": "$country",
              "source": "{{infiniteoptions_order.order.shipping_address.country}}"
            },
            {
              "destination": "$zip",
              "source": "{{infiniteoptions_order.order.shipping_address.zip}}"
            },
            {
              "destination": "$source",
              "source": "shopify"
            }
          ]
        },
        "local_fields": [
          {
            "key": "mapping",
            "type": "mapping",
            "tokens": "brackets",
            "location": "mapping"
          }
        ],
        "weight": 0
      }
    ],
    "storage": []
  }
}
