{
  "key": "shopify-order-created-to-shopify-update-order",
  "name": "Add Line Item Properties to Order Notes",
  "version": "1.0.0",
  "description": "Add line item properties from Infinite Options or Uploadery to the Order Notes field so they can be easily read by third party services.",
  "video": "",
  "readme": "",
  "tags": [],
  "source": "shopify_webhook",
  "destination": "shopify_api",
  "enabled": true,
  "source_tokens": [
    "email",
    "name",
    "line_items.0.variant_id",
    "line_items.0.quantity",
    "id",
    "closed_at",
    "created_at",
    "updated_at",
    "number",
    "note",
    "token",
    "gateway",
    "test",
    "total_price",
    "subtotal_price",
    "total_weight",
    "total_tax",
    "taxes_included",
    "currency",
    "financial_status",
    "confirmed",
    "total_discounts",
    "total_line_items_price",
    "cart_token",
    "buyer_accepts_marketing",
    "referring_site",
    "landing_site",
    "cancelled_at",
    "cancel_reason",
    "total_price_usd",
    "checkout_token",
    "reference",
    "user_id",
    "location_id",
    "source_identifier",
    "source_url",
    "processed_at",
    "device_id",
    "phone",
    "customer_locale",
    "app_id",
    "browser_ip",
    "landing_site_ref",
    "order_number",
    "discount_applications.0.type",
    "discount_applications.0.value",
    "discount_applications.0.value_type",
    "discount_applications.0.allocation_method",
    "discount_applications.0.target_selection",
    "discount_applications.0.target_type",
    "discount_applications.0.description",
    "discount_applications.0.title",
    "payment_gateway_names.0",
    "payment_gateway_names.1",
    "processing_method",
    "checkout_id",
    "source_name",
    "fulfillment_status",
    "tags",
    "contact_email",
    "order_status_url",
    "presentment_currency",
    "total_line_items_price_set.shop_money.amount",
    "total_line_items_price_set.shop_money.currency_code",
    "total_line_items_price_set.presentment_money.amount",
    "total_line_items_price_set.presentment_money.currency_code",
    "total_discounts_set.shop_money.amount",
    "total_discounts_set.shop_money.currency_code",
    "total_discounts_set.presentment_money.amount",
    "total_discounts_set.presentment_money.currency_code",
    "total_shipping_price_set.shop_money.amount",
    "total_shipping_price_set.shop_money.currency_code",
    "total_shipping_price_set.presentment_money.amount",
    "total_shipping_price_set.presentment_money.currency_code",
    "subtotal_price_set.shop_money.amount",
    "subtotal_price_set.shop_money.currency_code",
    "subtotal_price_set.presentment_money.amount",
    "subtotal_price_set.presentment_money.currency_code",
    "total_price_set.shop_money.amount",
    "total_price_set.shop_money.currency_code",
    "total_price_set.presentment_money.amount",
    "total_price_set.presentment_money.currency_code",
    "total_tax_set.shop_money.amount",
    "total_tax_set.shop_money.currency_code",
    "total_tax_set.presentment_money.amount",
    "total_tax_set.presentment_money.currency_code",
    "shipping_lines.0.id",
    "shipping_lines.0.title",
    "shipping_lines.0.price",
    "shipping_lines.0.code",
    "shipping_lines.0.source",
    "shipping_lines.0.phone",
    "shipping_lines.0.requested_fulfillment_service_id",
    "shipping_lines.0.delivery_category",
    "shipping_lines.0.carrier_identifier",
    "shipping_lines.0.discounted_price",
    "shipping_lines.0.price_set.shop_money.amount",
    "shipping_lines.0.price_set.shop_money.currency_code",
    "shipping_lines.0.price_set.presentment_money.amount",
    "shipping_lines.0.price_set.presentment_money.currency_code",
    "shipping_lines.0.discounted_price_set.shop_money.amount",
    "shipping_lines.0.discounted_price_set.shop_money.currency_code",
    "shipping_lines.0.discounted_price_set.presentment_money.amount",
    "shipping_lines.0.discounted_price_set.presentment_money.currency_code",
    "billing_address.first_name",
    "billing_address.address1",
    "billing_address.phone",
    "billing_address.city",
    "billing_address.zip",
    "billing_address.province",
    "billing_address.country",
    "billing_address.last_name",
    "billing_address.address2",
    "billing_address.company",
    "billing_address.latitude",
    "billing_address.longitude",
    "billing_address.name",
    "billing_address.country_code",
    "billing_address.province_code",
    "shipping_address.first_name",
    "shipping_address.address1",
    "shipping_address.phone",
    "shipping_address.city",
    "shipping_address.zip",
    "shipping_address.province",
    "shipping_address.country",
    "shipping_address.last_name",
    "shipping_address.address2",
    "shipping_address.company",
    "shipping_address.latitude",
    "shipping_address.longitude",
    "shipping_address.name",
    "shipping_address.country_code",
    "shipping_address.province_code",
    "customer.id",
    "customer.email",
    "customer.accepts_marketing",
    "customer.created_at",
    "customer.updated_at",
    "customer.first_name",
    "customer.last_name",
    "customer.orders_count",
    "customer.state",
    "customer.total_spent",
    "customer.last_order_id",
    "customer.note",
    "customer.verified_email",
    "customer.multipass_identifier",
    "customer.tax_exempt",
    "customer.phone",
    "customer.tags",
    "customer.last_order_name",
    "customer.currency",
    "customer.accepts_marketing_updated_at",
    "customer.marketing_opt_in_level",
    "customer.default_address.id",
    "customer.default_address.customer_id",
    "customer.default_address.first_name",
    "customer.default_address.last_name",
    "customer.default_address.company",
    "customer.default_address.address1",
    "customer.default_address.address2",
    "customer.default_address.city",
    "customer.default_address.province",
    "customer.default_address.country",
    "customer.default_address.zip",
    "customer.default_address.phone",
    "customer.default_address.name",
    "customer.default_address.province_code",
    "customer.default_address.country_code",
    "customer.default_address.country_name",
    "customer.default_address.default",
    "line_items.0.id",
    "line_items.0.title",
    "line_items.0.sku",
    "line_items.0.variant_title",
    "line_items.0.vendor",
    "line_items.0.fulfillment_service",
    "line_items.0.product_id",
    "line_items.0.requires_shipping",
    "line_items.0.taxable",
    "line_items.0.gift_card",
    "line_items.0.name",
    "line_items.0.variant_inventory_management",
    "line_items.0.product_exists",
    "line_items.0.fulfillable_quantity",
    "line_items.0.grams",
    "line_items.0.price",
    "line_items.0.total_discount",
    "line_items.0.fulfillment_status",
    "line_items.0.price_set.shop_money.amount",
    "line_items.0.price_set.shop_money.currency_code",
    "line_items.0.price_set.presentment_money.amount",
    "line_items.0.price_set.presentment_money.currency_code",
    "line_items.0.total_discount_set.shop_money.amount",
    "line_items.0.total_discount_set.shop_money.currency_code",
    "line_items.0.total_discount_set.presentment_money.amount",
    "line_items.0.total_discount_set.presentment_money.currency_code",
    "line_items.1.id",
    "line_items.1.variant_id",
    "line_items.1.title",
    "line_items.1.quantity",
    "line_items.1.sku",
    "line_items.1.variant_title",
    "line_items.1.vendor",
    "line_items.1.fulfillment_service",
    "line_items.1.product_id",
    "line_items.1.requires_shipping",
    "line_items.1.taxable",
    "line_items.1.gift_card",
    "line_items.1.name",
    "line_items.1.variant_inventory_management",
    "line_items.1.product_exists",
    "line_items.1.fulfillable_quantity",
    "line_items.1.grams",
    "line_items.1.price",
    "line_items.1.total_discount",
    "line_items.1.fulfillment_status",
    "line_items.1.price_set.shop_money.amount",
    "line_items.1.price_set.shop_money.currency_code",
    "line_items.1.price_set.presentment_money.amount",
    "line_items.1.price_set.presentment_money.currency_code",
    "line_items.1.total_discount_set.shop_money.amount",
    "line_items.1.total_discount_set.shop_money.currency_code",
    "line_items.1.total_discount_set.presentment_money.amount",
    "line_items.1.total_discount_set.presentment_money.currency_code",
    "line_items.1.discount_allocations.0.amount",
    "line_items.1.discount_allocations.0.discount_application_index",
    "line_items.1.discount_allocations.0.amount_set.shop_money.amount",
    "line_items.1.discount_allocations.0.amount_set.shop_money.currency_code",
    "line_items.1.discount_allocations.0.amount_set.presentment_money.amount",
    "line_items.1.discount_allocations.0.amount_set.presentment_money.currency_code"
  ],
  "config": {
    "inputs": [
      {
        "trigger_type": "input",
        "type": "shopify_webhook",
        "entity": "order",
        "action": "create",
        "name": "Shopify: Order Created",
        "key": "shopify-order-created",
        "metadata": {
          "topic": "orders/create"
        }
      }
    ],
    "outputs": [
      {
        "trigger_type": "output",
        "type": "transform",
        "entity": "mapping",
        "name": "Mapping to Shopify Update Order",
        "key": "mapping-to-shopify-update-order",
        "metadata": {
          "mapping": [
            {
              "destination": "note",
              "source": "{{line_item_properties}}",
              "notes": "We generate {{line_item_properties}} in the Transform code"
            }
          ],
          "script": "transform.js"
        },
        "local_fields": [
          {
            "key": "mapping",
            "type": "mapping"
          }
        ],
        "destination_entity": "order"
      },
      {
        "trigger_type": "output",
        "type": "shopify_api",
        "entity": "order",
        "action": "update",
        "name": "Shopify: Update Order",
        "key": "shopify-update-order",
        "metadata": {
          "shopify_api": "PUT admin/orders/{{order_id}}.json",
          "order_id": "{{source.id}}"
        },
        "source_entity": "mapping"
      }
    ],
    "secrets": [],
    "storage": []
  }
}